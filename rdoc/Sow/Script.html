<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: Sow::Script</title>

  
    <link rel="SHORTCUT ICON" href="../assets/icon/class.png">
  

  <link type="text/css" rel="stylesheet" href="../assets/rdoc.css" media="screen" />
  <link type="text/css" rel="stylesheet" href="../assets/highlight/styles/github.css" title="GitHub" />

  <script type="text/javascript" charset="utf-8" src="../assets/jquery.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/highlight/highlight.pack.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/quicksearch.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/main.js"></script>

  <script type="text/javascript">
    $(document).ready( function() {
      $('#documentation pre').wrapInner('<code></code>');
      hljs.tabReplace = '    ';
      hljs.initHighlightingOnLoad('ruby');

	    hookSourceViews();
	    hookDebuggingToggle();
	    hookQuickSearch();
	    highlightLocationTarget();

	    $('ul.link-list a').bind( "click", highlightClickTarget );
    });
  </script>
</head>
<body class="class">
<div id="main">

  <div class="head">
    <h1>
      
        <img src="../assets/icon/class.png" align="absmiddle">&nbsp;
      
      <a href="../index.html">Sow</a>&nbsp;
      <a href="/">Sow::Script</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="../lib/sow/script_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/sow/script.rb">lib/sow/script.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->
      <!-- TODO: generalize this for all SCMs -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        <ul>
          
          <li class="class">Object</li>
          
        </ul>
      </div>
      

      <!-- Namespace Contents -->
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
            
            <li class="singleton">
              <a href="#method-c-new">::new</a>
            </li>
          
            
            <li class="singleton">
              <a href="#method-c-scaffold">::scaffold</a>
            </li>
          
            
            <li class="singleton">
              <a href="#method-c-setup">::setup</a>
            </li>
          
            
            <li class="singleton">
              <a href="#method-c-utilize">::utilize</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-abort_unless_empty_or_managed">#abort_unless_empty_or_managed</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-argument">#argument</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-copy">#copy</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-destination">#destination</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-env">#env</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-environment">#environment</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-metadata">#metadata</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-method_missing">#method_missing</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-scaffold">#scaffold</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-setup">#setup</a>
            </li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Information</h3>
        <ul>
        
          <li class="file"><a href="../HISTORY.html">HISTORY</a></li>
        
          <li class="file"><a href="../README.html">README</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../assets/icon/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="module"><a href="../Sow.html">Sow</a></li>
        
          <li class="class"><a href="../Sow/Command.html">Sow::Command</a></li>
        
          <li class="class"><a href="../Sow/Context.html">Sow::Context</a></li>
        
          <li class="module"><a href="../Sow/Generators.html">Sow::Generators</a></li>
        
          <li class="class"><a href="../Sow/Generators/Base.html">Sow::Generators::Base</a></li>
        
          <li class="class"><a href="../Sow/Generators/Create.html">Sow::Generators::Create</a></li>
        
          <li class="class"><a href="../Sow/Generators/Delete.html">Sow::Generators::Delete</a></li>
        
          <li class="class"><a href="../Sow/Generators/Update.html">Sow::Generators::Update</a></li>
        
          <li class="class"><a href="../Sow/Logger.html">Sow::Logger</a></li>
        
          <li class="class"><a href="../Sow/Manager.html">Sow::Manager</a></li>
        
          <li class="class"><a href="../Sow/Metadata.html">Sow::Metadata</a></li>
        
          <li class="class"><a href="../Sow/Scaffold.html">Sow::Scaffold</a></li>
        
          <li class="class"><a href="../Sow/Script.html">Sow::Script</a></li>
        
          <li class="class"><a href="../Sow/Session.html">Sow::Session</a></li>
        
          <li class="class"><a href="../String.html">String</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>
    </div>

    <div id="validator-badges">
      
      <div style="float: right; margin-right: 5px;">
        <a href="http://validator.w3.org/check/referer"><img src="../assets/icon/check.png" alt="[Validate]" height="16" width="16" /></a>
      </div>
      Generated with <a href="http://github.com/proutils/webri">WebRI Redfish</a> 1.2.1
      <br/><br/>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      
        <h1>Script</h1>
      

      <p>
A Sowfile <a href="Script.html">Script</a> provides a simple DSL for
specifying a copylist and the various specificities needed to define a
scaffold generator proccess.
</p>

    </div>

    <!-- Constants -->
    

    <!-- Attributes -->
    
    <div id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="session-attribute-method" class="method-detail">
        <a name="session"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">session</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
Instance of <a href="Session.html">Session</a>.
</p>
        
        </div>
      </div>
      
      <div id="copylist-attribute-method" class="method-detail">
        <a name="copylist"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">copylist</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
Copylist contains the a list of transfer operations as  compiled from the
plugin.
</p>
        
        </div>
      </div>
      
    </div>
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="new-method" class="method-detail ">
        <a name="method-c-new"></a>

        <div class="method-heading">
        
          <span class="method-name">new</span><span
            class="method-args">(session)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="new-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 60</span>
60:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>)
61:       <span class="ruby-ivar">@session</span>  = <span class="ruby-identifier">session</span>
62:       <span class="ruby-ivar">@copylist</span> = []
63:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="scaffold-method" class="method-detail ">
        <a name="method-c-scaffold"></a>

        <div class="method-heading">
        
          <span class="method-name">scaffold</span><span
            class="method-args">(&block)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Scaffolding procedure, used to invoke <a
href="Script.html#method-i-copy">#</a>. TODO: allow there to be more than
one.
</p>
          

          
          <div class="method-source-code"
            id="scaffold-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 38</span>
38:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scaffold</span>(&amp;<span class="ruby-identifier">block</span>)
39:       <span class="ruby-identifier">define_method</span>(<span class="ruby-value">:scaffold</span>, &amp;<span class="ruby-identifier">block</span>)
40:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="setup-method" class="method-detail ">
        <a name="method-c-setup"></a>

        <div class="method-heading">
        
          <span class="method-name">setup</span><span
            class="method-args">(&block)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Setup procedure, used to setup metadata. TODO: allow there to be more than
one. Then we can import other scaffolds.
</p>
          

          
          <div class="method-source-code"
            id="setup-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 32</span>
32:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">setup</span>(&amp;<span class="ruby-identifier">block</span>)
33:       <span class="ruby-identifier">define_method</span>(<span class="ruby-value">:setup</span>, &amp;<span class="ruby-identifier">block</span>)
34:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="utilize-method" class="method-detail ">
        <a name="method-c-utilize"></a>

        <div class="method-heading">
        
          <span class="method-name">utilize</span><span
            class="method-args">(name)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="utilize-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 26</span>
26:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">utilize</span>(<span class="ruby-identifier">name</span>)
27:       <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;sow/extensions/#{name}&quot;</span>
28:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="public-instance-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="abort-unless-empty-or-managed-method" class="method-detail ">
        <a name="method-i-abort_unless_empty_or_managed"></a>

        <div class="method-heading">
        
          <span class="method-name">abort_unless_empty_or_managed</span><span
            class="method-args">(*ignore)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="abort-unless-empty-or-managed-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sow/script.rb, line 156</span>
156:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abort_unless_empty_or_managed</span>(*<span class="ruby-identifier">ignore</span>)
157:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">destination</span>.<span class="ruby-identifier">exist?</span>
158:         <span class="ruby-identifier">files</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">entries</span>(<span class="ruby-identifier">destination</span>) <span class="ruby-operator">-</span> ([<span class="ruby-value str">'.'</span>, <span class="ruby-value str">'..'</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">ignore</span>)
159:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">files</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">managed?</span>
160:           <span class="ruby-identifier">abort</span> <span class="ruby-value str">&quot;This seed is intended for new projects.\n&quot;</span> <span class="ruby-operator">+</span>
161:                 <span class="ruby-value str">&quot;But the destination directory is not empty.\n&quot;</span> <span class="ruby-operator">+</span>
162:                 <span class="ruby-value str">&quot;Please use --force, --skip or --prompt to proceed.&quot;</span>
163:         <span class="ruby-keyword kw">end</span>
164:       <span class="ruby-keyword kw">end</span>
165:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="argument-method" class="method-detail ">
        <a name="method-i-argument"></a>

        <div class="method-heading">
        
          <span class="method-name">argument</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Main argument.
</p>
          

          
          <div class="method-source-code"
            id="argument-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 92</span>
92:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">argument</span>
93:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">argument</span>
94:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="copy-method" class="method-detail ">
        <a name="method-i-copy"></a>

        <div class="method-heading">
        
          <span class="method-callseq">copy(from, opts)
copy(from, to, opts)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Designate a copying action.
</p>
          

          
          <div class="method-source-code"
            id="copy-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sow/script.rb, line 122</span>
122:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy</span>(*<span class="ruby-identifier">from_to_opts</span>)
123:       <span class="ruby-identifier">opts</span> = <span class="ruby-constant">Hash</span><span class="ruby-operator">===</span><span class="ruby-identifier">from_to_opts</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">from_to_opts</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}
124:       <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span> = *<span class="ruby-identifier">from_to_opts</span>
125:       <span class="ruby-identifier">to</span> = <span class="ruby-identifier">to</span> <span class="ruby-operator">||</span> <span class="ruby-value str">'.'</span>
126:       <span class="ruby-ivar">@copylist</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">rekey</span>(&amp;<span class="ruby-value">:to_s</span>)]
127:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="destination-method" class="method-detail ">
        <a name="method-i-destination"></a>

        <div class="method-heading">
        
          <span class="method-name">destination</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Destiation pathname. This is used by some plugins, particularly
full-project scaffolds, as a default package name. It is the basename of
the output directory.
</p>
          

          
          <div class="method-source-code"
            id="destination-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sow/script.rb, line 112</span>
112:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destination</span>
113:       <span class="ruby-identifier">session</span>.<span class="ruby-identifier">destination</span>
114:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="env-method" class="method-detail method-alias">
        <a name="method-i-env"></a>

        <div class="method-heading">
        
          <span class="method-name">env</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
        </div>

        
      </div>

    
      <div id="environment-method" class="method-detail ">
        <a name="method-i-environment"></a>

        <div class="method-heading">
        
          <span class="method-name">environment</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="environment-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 69</span>
69:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">environment</span>
70:       <span class="ruby-identifier">session</span>.<span class="ruby-identifier">environment</span>
71:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Script.html#method-i-env">env</a>
        </div>
        
      </div>

    
      <div id="metadata-method" class="method-detail ">
        <a name="method-i-metadata"></a>

        <div class="method-heading">
        
          <span class="method-name">metadata</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Access to <a href="Metadata.html">Metadata</a>. When the script is
initially executed, ie. toplevel and argument blocks, this is an
OpenStruct. Use it to assign values to the metadata, which is used to
render the file templates. When the scaffold block is finally executed,
this is reassigned to the destinations metadata, so that it can be used in
the copy calls, if needed.
</p>
          

          
          <div class="method-source-code"
            id="metadata-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sow/script.rb, line 104</span>
104:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">metadata</span>
105:       <span class="ruby-identifier">session</span>.<span class="ruby-identifier">metadata</span>
106:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="method-missing-method" class="method-detail ">
        <a name="method-i-method_missing"></a>

        <div class="method-heading">
        
          <span class="method-name">method_missing</span><span
            class="method-args">(s,*a)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
If method missing, routes the call to <tt>session</tt>.
</p>
          

          
          <div class="method-source-code"
            id="method-missing-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sow/script.rb, line 147</span>
147:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">s</span>,*<span class="ruby-identifier">a</span>)
148:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">session</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">s</span>)
149:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">session</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">s</span>)
150:       <span class="ruby-keyword kw">else</span>
151:         <span class="ruby-keyword kw">super</span>
152:       <span class="ruby-keyword kw">end</span>
153:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="scaffold-method" class="method-detail ">
        <a name="method-i-scaffold"></a>

        <div class="method-heading">
        
          <span class="method-name">scaffold</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Override and place copy statment in this method.
</p>
          

          
          <div class="method-source-code"
            id="scaffold-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 87</span>
87:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scaffold</span>
88:       <span class="ruby-identifier">copy</span> <span class="ruby-value str">'**/*'</span>, <span class="ruby-value str">'.'</span>
89:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="setup-method" class="method-detail ">
        <a name="method-i-setup"></a>

        <div class="method-heading">
        
          <span class="method-name">setup</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Override and setup metadata and validate. If something does jive, then use
# to terminate execution.
</p>
          

          
          <div class="method-source-code"
            id="setup-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sow/script.rb, line 83</span>
83:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
84:     <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</main>
</body>
</html>

