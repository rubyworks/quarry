<html>

<head>

<title>Sowing the Seeds of Software</title>

<link REL="SHORTCUT ICON" HREF="assets/images/flower2.jpg"/>
<link rel="stylesheet" href="assets/styles/index.css" type="text/css" media="screen, projection, print"/>

</head>

<body><div id="canvas">

<!--0-------------- HEADER ------------------->

<div id="menu">
  <a href="lowdown.html">Overview</a>       &#160;
  <a href="plugins.html">Plugin Gallery</a> &#160;
  <a href="rdoc/index.html">RDocs</a>       &#160;
  <a href="http://github.com/proutils/sow">Development</a>
</div>

<div id="head">
<div id="title">SOW</div>
<div id="subtitle">tending to project ecology</div>
<div id="formats">
  README <br/> bin <br/> lib <br/> test <br/> . . .
</div>
</div>

<div id="main">


<!--1--------------- OVERVIEW ------------------->

<div id="overview" class="section">

<h2>Introduction</h2>

<p>Sow is a project scaffolding generator. Techincally it is a simple,
plugable templating system based on eRuby, but it is designed with
project scaffolding squarely in mind.</p>

</div>


<!--2--------------- INSTALL ------------------->

<div id="install" class="section">

<h2>Installation</h2>

<p>Install using RubyGems as you would expect:</p>

<pre>
  $ gem install sow
</pre>

<p>Manual site installation can be achived via Ruby Setup. Please see the
<a href="http://rdoc/README.html">README</a> included in the
<a href="http://">tarball</a> for more information.</p>

</div>


<!--3--------------- USAGE ------------------->

<div id="usage" class="section">

<h2>Usage</h2>

<p>To start a new Ruby project simply use:</p>

<pre>
  $ sow --ruby=myapp
</pre>

<p>You will see the following outout:</p>

<pre>
  Transferring ruby files to myapp/:

      create  bin
      create  data
      create  doc
      create  doc
      create  lib
      create  lib/myapp
      create  meta
      create  test
      create  HISTORY.rdoc
      create  COPYING.rdoc
      create  README.rdoc
      create  meta/authors
      create  meta/created
      create  meta/description
      create  meta/email
      create  meta/homepage
      create  meta/license
      create  meta/package
      create  meta/repository
      create  meta/title
      create  meta/version

  You need to fix the occurances of &#8216;__FIX__&#8217; in the following files:

      README
      meta/description
</pre>

<!--
<p>Notice the mention of &#8216;reap/**/*&#8217;. By default Sow scaffolds-out
a project layout suited to use by Reap build system. This is a good project
layout even if you aren&#8217;t using Reap, but you may want to add a
standard Rakefile. You can do that will Sow:</p>

<pre>
  $ sow ruby/Rakefile myapp
</pre>

<p>On the other hand if you just want an old-fashioned Ruby project,
you can do:</p>

<pre>
  $ sow ruby myapp
</pre>
-->

<p>With you project setup, be sure to go over the contents and fine-tune it.
In particular, edit all the files that contain &#8216;__FIX__&#8217; entries.</p>

<!--
<p>Sow can continue to be used for in-project templates. To do this, add
templates to the temps/ or admin/temps directories, reflecting the same
layout of your project. For example:</p>

<pre>
  myapp/
    lib/
      myapp/
        myapp.rb
    temps/
      lib/
        myapp/
          myapp.rb.erb
    meta/
      ...
</pre>

<p>Change into your project directory and run:</p>

<pre>
  $ sow
</pre>

<p>Project files will be generated based on the templates and metadata
entries.</p>
-->
</div>


<!--4--------------- HOE USERS ------------------->

<div id="overview" class="section">

<h2>Hoe Users</h2>

<p>Hoe users will notice that the sow command that comes with Hoe is
overwritten by Sow. Sow supports Hoe projects, so there is nothing lost.
Simply use:</p>

<pre>
  $ sow --hoe [directory]
</pre>

<p>Note that the Hoe scaffold does not support the Till out of the box.
To get that you need to create a <code>.meta</code> direcroty in your project.</p>

</div>


<!--5--------------- PLUGINS ------------------->

<div id="plugins" class="section">

<h2>Designing Sow Plugins</h2>

<p>Creating your own plugin is actually quite easy. You simply need to add
a folder to a Ruby project's loadpath following the naming convention
<code>sow/seeds/&lt;name&gt;/</code>. This folder can be in a dedicated project
or part of another project. Typically your project's loadpath with be under
<code>lib/</code>. Let's say you want to call your plugin <code>mohgee</code>,
so you would have a <code>lib/sow/seeds/mohgee/</code> directory. Aternatively
you can make a separate folder for plugins, and add it's path to your project's
loadpath (which is what I do). In that case you might have a folder with a pathname
of <code>plug/sow/seeds/moghee/</code> and add <code>plug/</code> to the loadpath.</p>

<p>The plugin folder houses script(s) to instruct sow how to generate a
scaffold and a directory called <code>template</code> to hold the template
files you want to use for your scaffolding.</p>

<p>The instruction file(s) will either be a <code>SCRIPT.rb</code> file, or
a META.yaml and SEED.yaml file. Which of the two you decide depends mostly
on your preference. <code>SCRIPT.rb</code> is the the traditional approach, and is
probably best suited to complex scaffoldings. The script instructs Sow on how to
conduct the file transfers and generation in plain Ruby code. Essentailly, a Sow
script is a small Ruby DSL script containg a subclass of Sow::Script within the
Sow::Plugins namespace. There are only a few methods you need to know in order to
create you own plugin.</p>

<p>To get up to speed quickly on how a <code>SCRIPT.rb</code> is constructed, below
is the <code>SCRIPT.rb</code> for the built-in License plugin.</p>

<pre>
  module Sow::Plugins

    # Add specified license to your project.

    class License &lt; Script

      LICENSES = %w[gpl lgpl mit]

      about "Add LICENSE/COPYING file to project."

      usage "--license[=&lt;name&gt;]"

      argument :license

      setup do
        lic = license.downcase
        abort "License name required" unless LICENSES.include?(lic)
        metadata.license = lic.upcase
      end

      manifest do
        copy "*", '.', :cd => license.downcase
      end

    end

  end
</pre>

<p>Notice we have specifed the main argument via the <code>argument</code> meta-method.
This means the commandline <code>--license</code> option will take an argument.
In the setup method we set the <code>metadata.license</code> to thsi argument so that
it can be used for any erb template varaible in our <code>template/</code> directory.
The <code>manifest</code> method specifies the transfer instructions of copying
the appropriate contents from the template directory to our destination. The <code>:cd</cod>
is a convenince option that tell the copy command to drop down into a subdirectory
before performing the copy operation.</p>

<p>The layout of the license plugin looks basically like this:</p>

<pre>
  SCRIPT.rb
  template/
    gpl/
      COPYING
    lgpl/
      COPYING
      LICENSE
    mit/
      LICENSE
</pre>

<p>So for example, upon invoking <code>sow --license=lgpl</code>, sow will copy the
contest fo the <code>lgpl</code> directory into your project directory.</p>

<p>The other approach, of using the META.yml and SEED.yml files instead of a SCRIPT.rb,
allows you to specify the scaffolding instructions in the YAML format.
For comparison, in the above case the META.yml file would be as follows:</p>

<pre>
---
about   : "Add LICENSE/COPYING file to project."
usage   : "--license[=&lt;name&gt;]"
license : argument
licenses: [gpl, lgpl, mit]
validate:
  name = license.downcase;
  abort "License name required" unless licenses.include?(name)
</pre>

<p>And the SEED.yml file as:</p>

<pre>
---
- from: "*"
  to  : '.'
  cd  : &lt;%= license.downcase %&gt;
</pre>

<p>I am sure you already see the similarities between the two. The effectively do the
exact same thing. The later just happens to be a little bit easier to digest, and not
quite a tadbit less programmable.</p>

</div>


<!--6--------------- DEVELOPMENT ------------------->

<div id="development" class="section">

<h2>Development</h2>

</div>


<!--7--------------- COPYING ------------------->

<div id="copying" class="section">

<h3>Copying</h3>

<p>Copyright &#169; 2007, 2009 Thomas Sawyer</p>

<p>This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
more details.</p>

<p>You should have received a copy of the GNU General Public License along
with this program. If not, see
&amp;lt;http://www.gnu.org/licenses/&amp;gt;.</p>

</div>

<!--8--------------- NEWS ------------------->

<!--
<div id="news" class="section">

<h2> What's New </h2>

<div style="float: right; color: gray;">2008-07-21</div>

<h3>Two Years?</h3>
<p>Can you believe it's been two years? Over two years since I began this
crazy eyed journey to create the ultimate Ruby build tool. If I had any idea what I was
getting myself into I would likely have ran away screaming, thankful for having saved myself
an extrodinarily amount of <i>time</i>. Thankfully I can finally say that day has
almost arrived. And about time too. I was starting to get worried ;) The final result turned out
to be just a single project, rather three came from the edeavor: Ratch, Sow and Reap.</p>

</div>
-->

<!---------------- FOOTER ------------------>

<div id="copy">
  <a href="http://proutils.github.com/sow">Sow</a>
  Copyright (c) 2009 Thomas Sawyer (trans), all rights reserved.
</div>

</div></body>
</html>

